<!DOCTYPE html>
<html>
<head>
<meta charset = "utf-8">
<title>
p505 마우스스케칭
</title>
<style>

</style>
</head>
<body>

<h3>마우스드래깅</h3>
<hr>

선굵기 입력<input id="Fs" type="number" value="0"> 
색선택<input type="color" id="favcolor" name="favcolor" value="#F00000"><br>

<button id="Lm">선 생성 </button>
<button id="Tm">삼각형 생성 </button> 
<button id="RTm">사각형 생성 </button>  <button id="Rm">원 생성 </button>


<canvas id="myCanvas" style="background-color: aliceblue" width="1200" height="900">
</canvas>



<script>

let canvas = document.getElementById("myCanvas");
context= canvas.getContext("2d");



let start1X=0, start1Y=0;

let cur1X =0, cur1Y=0 ;

let startRTX=0, startRTY=0;
let curRTX =0, curYRT=0 ;

let startRX=0, startRY=0;
let curRX =0, curRY=0 ;

let dragging= false;

let Nc = document.getElementById("favcolor");  //색지정

Nc.addEventListener('mousedown',chC);
function chC()
{
console.log(Nc.value);
console.log(favcolor.value);
}


let Fs1 = document.getElementById("Fs");  //굵기 지정

Fs1.addEventListener('keyup',FsC);

function FsC()
{
console.log(Fs1.value);
console.log(Fs.value);
}

let c=0;
let c1=0;
let c2=0;

//-----------------------------------------------------------------------------------------------------------------------

let Tm1 = document.getElementById("Tm");  //삼각형
Tm1.addEventListener('click',Tm2);



	
	
	function Tm2(){
	c=0;
	c1=1;
	 c2=1;

	if(c== 0){

	//canvas = document.getElementById("myCanvas");
	//context= canvas.getContext("2d");
	context.lineWidth= Fs1.value;
	context.strokeStyle =favcolor.value;

	//canvas.addEventListener("mousemove", function (e) { Tmove(e) }, false);  //M움직일때
	canvas.addEventListener("mousedown", 	function (e) { Tclk(e) }, false);   //M 클릭할때
	canvas.addEventListener("mouseup", 	function (e) { Tup(e) }, false);	  //M 클릭땔때
	canvas.addEventListener("mouseout", 	function (e) { out(e) }, false);
	canvas.addEventListener("contextmenu", 	function (e) { riC(e) }, false);
		


function out(e){
	//Tm2() break;
//	return;
}

function Tmove(e){
	if(!dragging) return;
	let curX = e.offsetX, curY = e.offsetY;
	draw1(curX, curY);
	startX1 =curX; 
	startY1= curY;

}


function Tclk(e){
	
	start1X= e.offsetX; 
	start1Y = e.offsetY; 
	dragging = false;
	context.beginPath();
	context.moveTo(start1X, start1Y);
	console.log(start1X, start1Y);

}


function Tup(e) {


	cur1X =e.offsetX; 
	cur1Y =e.offsetY; 
	console.log(cur1X, cur1Y);
	context.lineTo(cur1X, cur1Y);
	context.lineTo(cur1X, start1Y);
	context.lineTo(start1X, start1Y);
	context.stroke();
}

function draw1(curX1, curY1) {
	
	 curX1 = e.offsetX,
	  curY1 = e.offsetY;

	}

}
	
else return null;
	
		
}





//------------------------------------------------------------------







let RTm1 = document.getElementById("RTm");  //사각형	
RTm1.addEventListener('click',RTm2);

//	Tm1.removeEventListener('click',Tm2);
//	Lm1.removeEventListener('click',init);

function RTm2(){

	c=1;
	c1=0;
	 c2=1;

	if(c1== 0){
	//canvas = document.getElementById("myCanvas");
	//context= canvas.getContext("2d");
	context.lineWidth= Fs1.value;
	context.strokeStyle =favcolor.value;

	//canvas.addEventListener("mousemove", function (e) { RTmove(e) }, false);  //M움직일때  n (e) { move(e) }, false);
	canvas.addEventListener("mousedown", 	function (e) { RTclk(e) }, true);   //M 클릭할때
	canvas.addEventListener("mouseup", 	function (e) { RTup(e) }, false);	  //M 클릭땔때
	canvas.addEventListener("mouseout", 	function (e) { out(e) }, false);
	canvas.addEventListener("contextmenu", 	function (e) { riC(e) }, false);
	//break Tm2();
	//break init();
	//canvas.removeEventListener("mouseout",Rm2);
	//canvas.removeEventListener("mouseout",init);


	//canvas.removeEventListener("mouseup", function (e) { Tup(e) }, false);	 
	//canvas.removeEventListener("mousedown", 	function (e) { down(e) }, false);
	
	function RTmove(e){
	if(!dragging) return;
	let curRTX = e.offsetX, curY = e.offsetY;
	draw1(curX, curY);
	startRTX =curX; 
	startRTY= curY;

}



function RTclk(e){
	

	startRTX= e.offsetX; 
	startRTY = e.offsetY; 
	dragging = false;
	context.beginPath();
	console.log(startRTX, startRTY);

}


function RTup(e) {
	curRTX =e.offsetX; 
	curRTY =e.offsetY; 
	console.log(curRTX, curRTY);

	context.moveTo(startRTX, startRTY);
	context.lineTo(curRTX, startRTY);
	context.lineTo(curRTX, curRTY);
	context.lineTo(startRTX,  curRTY);
	context.lineTo(startRTX, startRTY)
	context.stroke();
}

function draw1(curX1, curY1) {
	
	 curX1 = e.offsetX,
	  curY1 = e.offsetY;

}

}
	else return;
	







	
}






//let Rm1 = document.getElementById("Rm"); // 원

//Rm1.addEventListener('click',Rm2);


function Rm(){

	
}







//-----------------------------------------------------------------------------------------------------------------------








let Lm1= document.getElementById("Lm");
Lm1.addEventListener('click',init);


	//RTm1.removeEventListener('click',RTm2);
	//Tm1.removeEventListener('click',Tm2);

function init() {
	c=1;
	c1=1;
	 c2=0;  //0일때 실행
	

	if( c2==0) {
	context.lineWidth= Fs1.value;
	context.strokeStyle =favcolor.value;

	


	canvas.addEventListener("mousemove", function (e) { move(e) }, false);
	canvas.addEventListener("mousedown", 	function (e) { down(e) }, false);
	canvas.addEventListener("mouseup", 	function (e) { up(e) }, false);
	canvas.addEventListener("mouseout", 	function (e) { out(e) }, false);
	canvas.addEventListener("contextmenu", 	function (e) { riC(e) }, false);
	//break RTm2();
	//break Tm2();
	 startRTX=0, startRTY=0;
	 curRTX =0, curYRT=0 ;
	 startRX=0, startRY=0;
	curRX =0, curRY=0 ;

	//canvas.removeEventListener('mouseup',RTup(e));
	//canvas.removeEventListener('mouseenter',Tup(e));
	
	//canvas.removeEventListener("mouseup", function (e) { Tup(e) }, false);	 
	//canvas.removeEventListener("mouseup", function (e) { RTup(e) }, false);

	}
	else if(c2 !=0){
	return;
	}
// 버튼을 누르면 c값을 바꾼다 .let으로 지정해서 결국 c가 1,2,3 일때를 if문으로 해서 이벤트를 발생시킨다.??	
}


function riC(e) {
	
 dragging = false
context.delete;
context.clearRect(0, 0, canvas.width, canvas.height);
};


function draw(curX, curY) {
	
	context.beginPath();
	context.moveTo(startX, startY);
	context.lineTo(curX, curY);
	context.stroke();
	console.log(curX, curY);
}

function down(e) {
	


	startX= e.offsetX; 
	startY = e.offsetY; 
	dragging = true;
}


function up(e) {dragging = false; }

function move(e) {
	if(!dragging) return;
	let curX = e.offsetX, curY = e.offsetY;

	draw(curX, curY);
	startX =curX; 
	startY= curY;
}

	
function out(e) { dragging = false
//context.clearRect(0, 0, canvas.width, canvas.height)   캔버스 내용 올삭제하기 
;};








</script>
</body>
</html>